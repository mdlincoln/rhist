---
title: "Vignette Title"
author: "Vignette Author"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
library(rhist)
library(tidyverse)
library(dbplyr)
library(DBI)
```

```{r collect}
rhistory_commands <- collect_rhist()
rhistory_packages <- collect_session_packages()
```

```{r}
all_commands <- str_match_all(rhistory_commands$cmd, "([A-Za-z\\._]+)\\(") %>% 
  map(~ .[,2]) %>% 
  flatten_chr()

command_frequency <- fct_count(all_commands, sort = TRUE) %>% 
  mutate(f = fct_reorder(f, n))
```

```{r}
command_frequency %>% 
  slice(1:15) %>% 
  ggplot(aes(x = f, y = n)) +
  geom_bar(stat = "identity") +
  coord_flip()
```
